<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>Archetype - Validation Test Suite</title>
        <link rel="stylesheet" href="style.css">
        <style>
            .controls {
                display: flex;
                gap: 15px;
                align-items: center;
                margin-bottom: 20px;
                padding: 15px;
                border: 1px solid #000;
            }
            .controls label {
                display: flex;
                align-items: center;
                gap: 20px;
            }
            .controls button {
                flex-grow: 1;
            }
            .controls input[type="checkbox"] {
                width: 20px;
                height: 20px;
            }


            #test-results {
                border-top: 2px solid #000;
                margin-top: 20px;
            }

            .test-row {
                padding: 5px 10px;
                border-bottom: 1px solid #eee;
                font-family: monospace;
                display: flex;
                align-items: center;
            }

            .test-pass {
                color: #10b981;
            }

            .test-fail {
                color: #ef4444;
                font-weight: bold;
                background: #fff0f0;
            }

            .test-step {
                color: #666;
                font-style: italic;
                background: #fafafa;
            }

            .test-header {
                background: #000;
                color: #fff;
                font-weight: bold;
                text-transform: uppercase;
            }
        </style>
    </head>

    <body>
        <header>
            <a href="../dashboard.php" class="back-link">‚Üê BACK</a>
            <div id="session-info" class="user-info"></div>
        </header>

        <h2>Ultimate Scheme Validator Test</h2>
        <p>Open browser console (F12) for detailed JSON payloads on failure.</p>

        <div class="controls">
            <button id="run-btn" style="width: auto;">RUN TESTS</button>
            <label>
                <input type="checkbox" id="cleanup-check" checked>
                Cleanup data after tests (Entries & Schemes)
            </label>
        </div>

        <div id="test-results"></div>

        <script src="auth.js"></script>
        <script src="tests-data.js"></script>
        <script src="tests-runner.js"></script>
        <script>
            // Initialize the runner when DOM is ready
            document.addEventListener('DOMContentLoaded', () => {
                const runner = new TestRunner({
                    resultsId: 'test-results',
                    btnId: 'run-btn',
                    cleanupId: 'cleanup-check'
                });

                document.getElementById('run-btn').addEventListener('click', () => {
                    runner.start();
                });
            });
        </script>
    </body>

</html>