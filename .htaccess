# Enable URL rewriting
RewriteEngine On

# Base path for rewrites
# Keep "/" for root deployment, change to "/subfolder/" if deployed in a subdirectory
RewriteBase /

# Security: disable directory listing
Options -Indexes

# Redirect root URL "/" to index.php or index.html
# index.php is preferred if both exist
RewriteRule ^$ index.php [L]

# Security: deny direct access to sensitive directories (including subpaths)
RewriteRule ^core(?:/|$) - [F,L]
RewriteRule ^data(?:/|$) - [F,L]
RewriteRule ^vendor(?:/|$) - [F,L]

# Security: deny direct access to sensitive files
RewriteRule ^\.env$ - [F,L]
RewriteRule ^composer\.(json|lock)$ - [F,L]

# Security: deny access to hidden files and directories
# Allow .well-known (required for TLS/ACME challenges)
RewriteRule ^\.(?!well-known/) - [F,L]

# Pretty URLs for PHP endpoints
# Example: /api/logs/get -> /api/logs/get.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php [L,QSA]
