<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>Archetype - Reset Password</title>
        <link rel="stylesheet" href="style.css">
    </head>

    <body>
        <header>
            <a href="../admin.php" class="back-link">‚Üê BACK</a>
            <div id="session-info" class="user-info"></div>
        </header>

        <section>
            <h3>POST /api/user-change-password</h3>
            <p>Complete the form to set your new password.</p>

            <input id="r_token" type="text" readonly placeholder="Token (from URL)">
            <input id="r_email" type="email" placeholder="Account Email">
            <input id="r_pass" type="password" placeholder="New Password">

            <button onclick="submitReset()">Update Password</button>

            <pre id="out-reset"></pre>
        </section>

        <script src="auth.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const params = new URLSearchParams(window.location.search);
                if (params.has('token')) {
                    document.getElementById('r_token').value = params.get('token');
                }
            });

            function submitReset() {
                const payload = {
                    token: document.getElementById('r_token').value,
                    email: document.getElementById('r_email').value,
                    password: document.getElementById('r_pass').value
                };

                run('/api/user-change-password', 'POST', payload, 'out-reset');
            }
        </script>
    </body>

</html>